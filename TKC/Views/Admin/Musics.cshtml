@{
    ViewData["Title"] = "Admin - Short Takes";
}
@model List<Music>

    <section class="sermon_video_btn">
        <div class="container">
            <div class="inner_video_sermons">

                <div class="info_sermon_img">
                    <img src="/img/info-point 1.svg" alt="">
                    <span>Music</span>
                </div>
                <div class="sermons_btns">
                    <a class="all_btns_sermon" asp-controller="Admin" asp-action="Music">All Music</a>
                    <a class="all_btns_sermon" asp-controller="Admin" asp-action="Index">Admin Home</a>
                </div>
            </div>
        </div>
    </section>

<section class="Sermons_section">
    <div class="container">
        <div class="Sermons_content">
            <h2>Admin - Music</h2>

            <div class="inner_valus_data">
                <div class="sermons_values">
                    <a class="nounderline sermons_values" asp-controller="Admin" asp-action="MusicNew">
                        <h4>&nbsp;</h4>
                    </a>
                </div>
                <div class="sermons_date">
                    <a class="nounderline sermons_values" style="color: #B8945C;" asp-controller="Admin" asp-action="MusicNew"><span style="color: #B8945C;">Add New</span></a>
                </div>
            </div>

            <div id="inner">

                @foreach (var m in Model)
                {
                    <div class="inner_valus_data" id="@("item_" + m.Id)">
                        <div class="sermons_values">
                            <a class="nounderline sermons_values" asp-controller="Admin" asp-action="Music" asp-route-id="@m.Id">
                                <h4>@m.Title</h4>
                                <span>(@m.DateCreated.ToString("MMM dd, yyyy"))</span>
                            </a>
                        </div>
                        <div class="sermons_date">
                            <a class="nounderline sermons_values" asp-controller="Admin" asp-action="Music" asp-route-id="@m.Id"><span>Edit</span></a>
                            <span>•</span>
                            <a class="nounderline sermons_values" href="#" onclick="deleteItem(@m.Id, '@m.Title'); return false;"><span>Delete</span></a>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</section>

<script type="text/javascript">
    function deleteItem(itemId, title) {

        const messageTitle = "Are you sure you want to delete " + title + "?";
        var isConfirmed = window.confirm(messageTitle);
        if (isConfirmed) {
            const url = '/api/music/' + itemId;
            runDelete(url);
        }
    }

    function runDelete(url) {
        $.ajax({
            url: url,
            type: 'DELETE',
            dataType: 'json',
            success: function (results) {
                handleResults(results);

            },
            error: function (error) {
                alert("Delete didn't work,please check your internet connection");
            }
        });
    }
</script>